<%= webpacked_plugins_js_for :foreman_ansible %>
<%= webpacked_plugins_css_for :foreman_ansible %>
<% title _("Ansible Roles") %>

<% title_actions ansible_proxy_import(hash_for_import_ansible_roles_path),
  documentation_button('#4.1ImportingRoles', :root_url => ansible_doc_url) %>



<% rows = [] %>
<%   @ansible_roles.each do |role| %>
  <% hosts_path =  hosts_path(:search => "ansible_role = #{role.name}") %>
  <% imported_at= import_time role %>
  <% variables = role.ansible_variables.count.to_s + " " + ansible_variables_path(:search => "ansible_role = #{role}") %>
  <% hosts = role.hosts.count.to_s + " " + hosts_path %>
  <% can_delete = authorized_for(hash_for_ansible_role_path(:id => role).merge(:auth_object => role, :authorizer => authorizer)) %>
  <% rows.append({ cells: [
                   role.name,
                   variables,
                   role.hostgroups.count,
                   hosts,
                   imported_at,
                   ],
                   role: role, id: role.name, can_delete: can_delete })
 %>
<% end %>

<%= react_component(
        'WrappedRolesIndex',
        :rowsData => rows,
    ) %>
